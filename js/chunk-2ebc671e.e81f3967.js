(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ebc671e"],{"1f4f":function(t,e,n){"use strict";var i=n("5530"),a=(n("a9e3"),n("8b37"),n("80d2")),s=n("7560"),o=n("58df");e["a"]=Object(o["a"])(s["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(i["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(a["f"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"31f2":function(t,e,n){},"8b37":function(t,e,n){},"9d01":function(t,e,n){},a7df:function(t,e,n){"use strict";n("31f2")},b73d:function(t,e,n){"use strict";var i=n("15fd"),a=n("5530"),s=(n("0481"),n("ec29"),n("9d01"),n("fe09")),o=n("c37a"),r=n("c3f0"),c=n("0789"),l=n("490a"),u=n("80d2"),d=["title"];e["a"]=s["a"].extend({name:"v-switch",directives:{Touch:r["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({},o["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){var t=this.attrs$,e=(t.title,Object(i["a"])(t,d));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(a["a"])(Object(a["a"])({},this.attrs),e)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(c["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(l["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===u["s"].left&&this.isActive||t.keyCode===u["s"].right&&!this.isActive)&&this.onChange()}}})},e084:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"mb-12"},[n("v-row",[n("page-title",[t._v(" Рецепты ")]),n("guide",[t._v(" На этой странице можно добавить рецепты самодельных удобрений. "),n("br"),n("br"),t._v(" Можно составить свой рецепт, а так же можно воспользоваться готовыми рецептами других аквариумистов. "),n("br"),n("br"),t._v(" Рецепты - это ваши собственные удобрения, которые можно использовать при составлении "),n("router-link",{attrs:{to:"/schedules"}},[t._v(" расписания ")]),t._v(" внесения удобрений. ")],1),0===t.recipes.length?n("v-col",{attrs:{cols:"12",md:"8","offset-md":"2"}},[n("p",{staticClass:"mb-8",class:{"text-h6":t.$vuetify.breakpoint["xs"],"text-h5":t.$vuetify.breakpoint["smAndUp"]}},[t._v(" У вас нет ни одного рецепта ")])]):t._e(),n("v-col",{attrs:{cols:"12",sm:"8","offset-sm":"2"}},[n("v-expansion-panels",{attrs:{multiple:""}},[n("draggable",t._b({staticStyle:{width:"100%"},attrs:{handle:".handle"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.recipes,callback:function(e){t.recipes=e},expression:"recipes"}},"draggable",t.dragOptions,!1),[n("transition-group",{attrs:{type:"transition",name:t.drag?null:"flip-list"}},t._l(t.recipes,(function(e,i){return n("v-expansion-panel",{key:e.name},[n("v-expansion-panel-header",{staticClass:"pa-3 py-sm-4 px-sm-6"},[n("div",{staticClass:"d-flex justify-space-between align-center",staticStyle:{width:"100%"}},[n("span",{staticClass:"no-break font-weight-regular d-flex flex-column flex-sm-row align-start",class:{"subtitle-1":t.$vuetify.breakpoint["xs"],title:t.$vuetify.breakpoint["smAndUp"]}},[n("span",{staticStyle:{"line-height":"1.25rem"}},[t._v(" "+t._s(e.name)+" ")])]),n("span",{staticClass:"mr-3"},[n("v-tooltip",{attrs:{bottom:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-icon",t._g({staticClass:"handle ml-2"},i),[t._v("mdi mdi-drag")])]}}],null,!0)},[t._v(" "+t._s(t.$t("recipes.panels.header.pull"))+" ")])],1)])]),n("v-expansion-panel-content",[n("Recipe",{attrs:{recipe:e}}),n("div",{staticClass:"d-flex justify-end mt-4"},[n("v-btn",{attrs:{text:""},on:{click:function(e){return t.openShareDialog(i)}}},[t._v(" Поделиться ")]),n("v-btn",{staticClass:"mr-n4",attrs:{text:""},on:{click:function(e){return t.openEditRecipe(i)}}},[t._v(" Открыть ")])],1)],1)],1)})),1)],1)],1)],1)],1),n("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[(t.isEditing,n("v-toolbar-title",[t._v(" "+t._s(t.$t("recipes.dialog.recipeEdit"))+" ")])),n("v-btn",{staticClass:"ml-auto",attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[n("v-icon",[t._v("mdi-close")])],1)],1),n("v-card-text",{staticClass:"px-2"},[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"8","offset-md":"2"}},[n("v-form",{ref:"recipeForm"},[n("v-row",[t.isShared?n("shared"):t._e(),n("v-col",{staticClass:"pt-0 mt-8",attrs:{cols:"12"}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-select",{attrs:{items:t.reagents,"item-text":"text","item-value":"value",multiple:"",label:"Реагент",hint:"Вы можете выбрать несколько реагентов","persistent-hint":"","hide-details":"auto",rules:t.rulesReagent},model:{value:t.reagentsSelected,callback:function(e){t.reagentsSelected=e},expression:"reagentsSelected"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-select",{attrs:{items:t.recipesExamples,label:"Рецепт",hint:"или выбрать один из рецептов","persistent-hint":"","hide-details":"auto"},model:{value:t.recipeExampleChosen,callback:function(e){t.recipeExampleChosen=e},expression:"recipeExampleChosen"}})],1),n("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[t.reagentsSelected.length>0?n("div",{staticClass:"mt-3"},[t._l(t.reagents,(function(e,i){return[t.reagentsSelected.includes(e.value)?n("div",{key:e.value,staticClass:"d-flex justify-space-between caption"},[n("div",[t._v(t._s(t.reagents[i].name))]),n("div",[t._v(t._s(t.showComponents(t.countPercent(e.value))))])]):t._e()]}))],2):t._e(),t.reagentsSelected.length>0?n("div",{staticClass:"mt-3"},[n("small",[t._v(" *Так как аквариумисту удобнее работать с нитратом (NO3), а не с азотом (N), далее азот будет приведен к нитрату. ")])]):t._e()]),n("v-expand-transition",[t.reagentsSelected.length>0?n("v-col",{attrs:{cols:"12"}},[n("v-radio-group",{attrs:{value:t.isWater,row:"","hide-details":"auto"},on:{change:t.setIsWater}},[n("v-radio",{attrs:{label:"Водный раствор",value:!0}}),n("v-radio",{attrs:{label:"Безводная смесь",value:!1}})],1)],1):t._e()],1),n("v-expand-transition",[t.reagentsSelected.length>0&&t.isWater?n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{value:t.fertilizerVolume,type:"number",label:"Введите объем удобрения",suffix:"мл",hint:"Выбирайте объем, который вы сможете использовать в течении 2-3x месяцев.\n                            Обычно это 250-300 мл.","hide-details":"auto",rules:[!t.isWater||t.rulesVolume.isExist()]},on:{input:t.inputVolume}})],1):t._e()],1),n("v-expand-transition",[t.reagentsSelected.length>0&&(t.fertilizerVolume||!t.isWater)?n("v-col",{attrs:{cols:"12"}},[n("v-row",[t.isWater?n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"d-flex align-center"},[n("v-divider"),n("span",{staticClass:"mx-3"},[t._v(" Введите массу реагента "),n("v-tooltip",{attrs:{bottom:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-icon",t._g({},i),[t._v("mdi-help-circle-outline")])]}}],null,!1,2575987712)},[t._v(" Введите массу реагента и калькулятор автоматически рассчитает дозы элементов, которые показаны ниже. ")])],1),n("v-divider")],1)]):t._e(),t._l(t.reagentsSelected,(function(e){return n("v-col",{key:e,staticClass:"py-0",attrs:{cols:"12"}},[n("v-text-field",{key:e,attrs:{value:t.fertilizerMass[e],type:"number",label:e,suffix:"г",hint:t.isWater?t.fertilizerMassHint(e):"","hide-details":"auto",rules:[t.rulesMass.isExist()],error:t.fertilizerMass[e]/t.fertilizerVolume*1e3>t.FORMULAS[e].solubilityLimit,"error-messages":t.fertilizerMass[e]/t.fertilizerVolume*1e3>t.FORMULAS[e].solubilityLimit?"Достигнута максимальная растворимость -\n                                    "+t.FORMULAS[e].solubilityLimit+" г/л при 20°С!":""},on:{input:function(n){return t.inputMass(n,e)}}})],1)})),t.isWater?n("v-col",{staticClass:"mt-2 pb-0",attrs:{cols:"12"}},[n("v-btn",{staticClass:"px-0",attrs:{center:"",text:""},on:{click:function(e){t.isShowConcentration=!t.isShowConcentration}}},[t._v(" Показать концентрации "),n("v-icon",[t._v(t._s(t.isShowConcentration?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1):t._e(),n("v-expand-transition",[t.isShowConcentration&&t.isWater?n("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[n("elements-table",{attrs:{"total-ion-concentration":t.totalIonConcentration,"fertilizer-mass":t.fertilizerMass,concentration:t.concentration}})],1):t._e()],1),n("v-expand-transition",[t.isWater?t._e():n("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[n("elements-dry-table",{attrs:{"total-ion-concentration":t.totalIonConcentration,"fertilizer-mass":t.fertilizerMass,"total-fertilizer-mass":t.totalFertilizerMass}})],1)],1),t.isWater?n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"d-flex align-center"},[n("v-divider"),n("span",{staticClass:"mx-3"},[t._v(" Или введите дозу элемента "),n("v-tooltip",{attrs:{bottom:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-icon",t._g({},i),[t._v("mdi-help-circle-outline")])]}}],null,!1,2575987712)},[t._v(" Калькулятор автоматически рассчитает необходимую массу реагента. Доза - это количество элемента, на которую повысится концентрация элемента в заданном объеме аквариума при внесении 1 мл удобрения. Например, вы хотите сделать макро удобрение с нитратом. И для удобства введения его в аквариум вы бы хотели, чтобы на каждый вводимый 1 мл удобрения, нитрат повышался на 0.5 мг/л. 0.5 - это доза. ")])],1),n("v-divider")],1)]):t._e(),n("v-expand-transition",[t.reagentsSelected.length>0&&t.isWater?n("v-col",{attrs:{cols:"12"}},[n("v-combobox",{attrs:{items:t.tanks,type:"Number","item-text":"name","item-value":"volume",label:"Объем аквариума","persistent-hint":"","hide-selected":"",hint:"Выберите аквариум или введите объем",suffix:"л","return-object":!1},model:{value:t.tankVolume,callback:function(e){t.tankVolume=t._n(e)},expression:"tankVolume"}})],1):t._e()],1),t.tankVolume&&t.isWater?n("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[n("v-row",[t._l(t.reagentsSelected,(function(e){return[n("v-col",{key:e,staticClass:"py-0",attrs:{cols:"12"}},[n("v-row",{staticClass:"mb-3"},[t._l(t.FORMULAS[e].ions,(function(i,a){return[i.isNeeded?n("v-col",{key:e+a,staticClass:"py-0"},[n("v-text-field",{attrs:{value:t.solute[e][a],type:"number",label:t.convertIonName(a)+", мг/л",hint:"из "+e,"persistent-hint":""},on:{input:function(n){return t.inputIonDose(n,e,a)}}})],1):t._e()]}))],2)],1)]})),t.reagentsSelected.length>1?n("v-col",{staticClass:"d-flex justify-space-between pb-0",attrs:{cols:"12"}},[n("div",[t._v(" Общая доза, мг/л ")]),n("div",{staticClass:"d-flex flex-column"},t._l(t.countTotalIonDose(t.solute),(function(e,i){return n("div",{key:i,staticClass:"d-flex justify-space-between"},[n("div",[t._v(t._s(t.convertIonName(i))+":")]),n("div",{staticClass:"ml-3"},[t._v(" "+t._s(e.toFixed(3))+" "),t.countTotalDose(t.solute)?[t._v(" ("+t._s((e/t.countTotalDose(t.solute)*100).toFixed(2))+"%) ")]:t._e()],2)])})),0)]):t._e()],2)],1):t._e()],2)],1):t._e()],1),n("v-expand-transition",[t.reagentsSelected.length>0&&(t.fertilizerVolume||!t.isWater)?n("v-col",{attrs:{cols:"12"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Имя рецепта","hide-details":"auto",hint:"Придумайте имя рецепта, чтобы не путать его с другими рецептами",rules:t.rulesName},model:{value:t.recipeName,callback:function(e){t.recipeName=e},expression:"recipeName"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{label:"Примечание","hide-details":"auto","auto-grow":"",rows:"1",hint:"Вы можете добавить дополнительные сведения к рецепту"},model:{value:t.recipeNote,callback:function(e){t.recipeNote=e},expression:"recipeNote"}})],1),n("v-col",{staticClass:"text-right",attrs:{cols:"12"}},[t.isEditing?n("v-btn",{on:{click:t.removeRecipe}},[t._v(" Удалить ")]):t._e(),t.isEditing?n("v-btn",{staticClass:"ml-2",attrs:{color:"primary"},on:{click:t.editRecipe}},[t._v(" Сохранить ")]):t._e(),t.isEditing?t._e():n("v-btn",{attrs:{color:"primary"},on:{click:t.addRecipe}},[t._v(" Сохранить ")])],1)],1)],1):t._e()],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),n("v-dialog",{attrs:{width:"500"},model:{value:t.dialogShare,callback:function(e){t.dialogShare=e},expression:"dialogShare"}},[n("v-card",[n("v-card-title",[t._v(" Поделиться ссылкой ")]),null!==this.curRecipeIndex?n("v-card-text",[n("v-text-field",{attrs:{value:t.encodedUrl,label:"Ваша ссылка для отправки",hint:"Скопируйте ссылку",id:"encodedUrl"},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-tooltip",{attrs:{bottom:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("a",{on:{click:function(e){return t.copyUrl()}}},[n("v-icon",t._g({},i),[t._v("fas fa-clipboard")])],1)]}}],null,!1,2825547708)},[t._v(" Скопировать ")])]},proxy:!0}],null,!1,3442195153)})],1):t._e(),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(e){t.dialogShare=!1}}},[t._v(" Закрыть ")])],1)],1)],1),n("add-button",{attrs:{action:t.openAddRecipe}},[t._v(" "+t._s(t.$t("recipes.addButton"))+" ")])],1)},a=[],s=n("2909"),o=n("3835"),r=n("5530"),c=(n("159b"),n("4fad"),n("99af"),n("b0c0"),n("4e827"),n("07ac"),n("b64b"),n("d81d"),n("c740"),n("ac1f"),n("5319"),n("7db0"),n("b680"),n("a15b"),n("2b0e")),l=n("e8d1"),u=[{name:"Kuban Aquariums Нитрат",reagents:{KNO3:49.71,"(NH2)2CO":5.02,NH4NO3:6.71,C6H7KO2:.5},tankVolume:100,fertilizerVolume:1e3,note:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Фосфат",reagents:{KH2PO4:7.01,C6H7KO2:.5},tankVolume:100,fertilizerVolume:1e3,note:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Калий",reagents:{K2SO4:84.76,C6H7KO2:.5},tankVolume:100,fertilizerVolume:1e3,note:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Aqua Botanic Нитрат",reagents:{KNO3:82.88},tankVolume:100,fertilizerVolume:1e3,note:"Чистая калиевая селитра. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Нитрат+",reagents:{KNO3:49.71,"(NH2)2CO":5.02,NH4NO3:6.71},tankVolume:100,fertilizerVolume:1e3,note:"Калиевая селитра, разбавленная мочевиной и нитратом аммония. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Фосфат",reagents:{KH2PO4:7.01},tankVolume:100,fertilizerVolume:1e3,note:"Чистый монофосфат калия. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Калий",reagents:{K2SO4:84.76},tankVolume:100,fertilizerVolume:1e3,note:"Чистый сульфат калия. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"NPK Amania.org 1:15",reagents:{KNO3:106.45,KH2PO4:5.77},tankVolume:100,fertilizerVolume:1e3,note:"Макро в соотношении 1 к 15. Рецепт взят с сайта amania.org"},{name:"NPK Amania.org 1:15 + амидный азот",reagents:{KNO3:53.6,"(NH2)2CO":16,KH2PO4:5.77},tankVolume:100,fertilizerVolume:1e3,note:"Макро в соотношении 1 к 15. Калиевая селитра в соотношении 50 на 50 с мочевиной. Рецепт взят с сайта amania.org"},{name:"Удо Ермолаева. МИКРО",reagents:{K2SO4:7.45,"MgSO4(H2O)7":16.4,"Fe2(SO4)3(H2O)9":1.45,"CuSO4(H2O)5":.1,"ZnSO4(H2O)7":.04,H3BO3:.1,"(NH4)2MoO4":.04,"MnSO4(H2O)5":.73,C10H14N2Na2O8:2.5},tankVolume:100,fertilizerVolume:500,note:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Удо Ермолаева. МИКРО (gh < 7)",reagents:{K2SO4:7.45,"MgSO4(H2O)7":16.4,"Fe2(SO4)3(H2O)9":1.45,"CuSO4(H2O)5":.1,"ZnSO4(H2O)7":.04,H3BO3:.1,"(NH4)2MoO4":.04,"MnSO4(H2O)5":.73,C10H14N2Na2O8:1.75},tankVolume:100,fertilizerVolume:500,note:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Удо Ермолаева. МИКРО (Железный купорос)",reagents:{K2SO4:7.45,"MgSO4(H2O)7":16.4,"FeSO4(H2O)7":1.44,"CuSO4(H2O)5":.1,"ZnSO4(H2O)7":.04,H3BO3:.1,"(NH4)2MoO4":.04,"MnSO4(H2O)5":.73,C10H14N2Na2O8:1.75,C14H18N3O10Na2Fe:1},tankVolume:100,fertilizerVolume:500,note:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"}],d=n("da53"),h=n("2f62"),v=n("b76a"),m=n.n(v),p=n("36af"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"d-flex mt-1",class:{"flex-column":t.$vuetify.breakpoint["xs"],"flex-row":t.$vuetify.breakpoint["smAndUp"]}},[n("v-switch",{staticClass:"mr-4",attrs:{label:"Показать соотношение","hide-details":"auto"},model:{value:t.isConcentrationPercent,callback:function(e){t.isConcentrationPercent=e},expression:"isConcentrationPercent"}}),n("v-switch",{staticClass:"mr-4",attrs:{label:"Показать N и P","hide-details":"auto"},model:{value:t.isConvertion,callback:function(e){t.isConvertion=e},expression:"isConvertion"}})],1),n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"pl-0 text-center"},[t._v(" Реагент ")]),t._l(Object.keys(t.totalIonConcentration),(function(e,i){return n("th",{key:e,staticClass:"text-center",class:{"pr-0":i===Object.keys(t.totalIonConcentration).length-1}},[t.isConvertion&&e!==t.convertIonName(e)?[t._v(" "+t._s(e)+" / ")]:t._e(),e!==t.convertIonName(e)?[t._v(" "+t._s(t.convertIonName(e))+", г/л ")]:[t._v(" "+t._s(e)+", г/л ")]],2)}))],2)]),n("tbody",[t._l(Object.keys(t.concentration),(function(e){return n("tr",{key:e},[n("td",{staticClass:"pl-0 text-center"},[t._v(" "+t._s(e)+" ")]),t._l(t.totalIonConcentration,(function(i,a,s){return n("td",{key:e+a,staticClass:"text-center",class:{"pr-0":s===Object.keys(t.concentration).length-1}},[Object.keys(t.concentration[e]).includes(a)?[t.isConvertion&&a!==t.convertIonName(a)?[t._v(" "+t._s(t.concentration[e][a].toFixed(3))+" / ")]:t._e(),a!==t.convertIonName(a)?[t._v(" "+t._s((t.convertIonRatio(a)*t.concentration[e][a]).toFixed(3))+" ")]:[t._v(" "+t._s(t.concentration[e][a].toFixed(3))+" ")],i&&t.isConcentrationPercent?[t._v(" ("+t._s((t.concentration[e][a]/i*100).toFixed(1))+"%) ")]:t._e()]:[t._v(" - ")]],2)}))],2)})),n("tr",{staticClass:"font-weight-bold"},[n("td",{staticClass:"pl-0 text-center"},[t._v(" Сумма ")]),t._l(t.totalIonConcentration,(function(e,i,a){return[i!==t.convertIonName(i)?n("td",{key:i,staticClass:"text-center",class:{"pr-0":a===Object.keys(t.totalIonConcentration).length-1}},[t.isConvertion&&i!==t.convertIonName(i)?[t._v(" "+t._s(e.toFixed(3))+" / ")]:t._e(),t._v(" "+t._s((t.convertIonRatio(i)*e).toFixed(3))+" ")],2):n("td",{key:i,staticClass:"text-center",class:{"pr-0":a===Object.keys(t.totalIonConcentration).length-1}},[t._v(" "+t._s(e.toFixed(3))+" ")])]}))],2)],2)]},proxy:!0}])})],1)},b=[],_={name:"ElementsTable",props:{totalIonConcentration:{type:Object,default:function(){}},fertilizerMass:{type:Object,default:function(){}},concentration:{type:Object,default:function(){}}},data:function(){return{isConcentrationPercent:!1,isConvertion:!1}},methods:{convertIonRatio:d["c"],convertIonName:d["b"],countPercent:d["d"]}},g=_,C=n("2877"),x=n("6544"),O=n.n(x),S=n("1f4f"),y=n("b73d"),k=Object(C["a"])(g,f,b,!1,null,"4d7df51e",null),V=k.exports;O()(k,{VSimpleTable:S["a"],VSwitch:y["a"]});var w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"d-flex mt-2 mb-2",class:{"flex-column":t.$vuetify.breakpoint["xs"],"flex-row":t.$vuetify.breakpoint["smAndUp"]}},[n("v-switch",{staticClass:"mr-4",attrs:{label:"Показать соотношение","hide-details":"auto"},model:{value:t.isConcentrationPercent,callback:function(e){t.isConcentrationPercent=e},expression:"isConcentrationPercent"}}),n("v-switch",{staticClass:"mr-4",attrs:{label:"Показать N и P","hide-details":"auto"},model:{value:t.isConvertion,callback:function(e){t.isConvertion=e},expression:"isConvertion"}})],1),n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"pl-0 text-center"},[t._v(" Реагент ")]),t._l(Object.keys(t.totalIonConcentration),(function(e,i){return n("th",{key:e,staticClass:"text-center",class:{"pr-0":i===t.totalIonConcentration.length-1}},[t.isConvertion&&e!==t.convertIonName(e)?[t._v(" "+t._s(e)+" / ")]:t._e(),e!==t.convertIonName(e)?[t._v(" "+t._s(t.convertIonName(e))+", г ")]:[t._v(" "+t._s(e)+", г ")]],2)}))],2)]),n("tbody",[t._l(t.fertilizerMass,(function(e,i){return n("tr",{key:i},[n("td",{staticClass:"pl-0 text-center"},[t._v(" "+t._s(i)+" ")]),t._l(t.totalIonConcentration,(function(a,s,o){return n("td",{key:i+s,staticClass:"text-center",class:{"pr-0":o===t.totalIonConcentration.length-1}},[Object.keys(t.countPercent(i)).includes(s)?[t.isConvertion&&s!==t.convertIonName(s)?[t._v(" "+t._s((e*t.countPercent(i)[s]).toFixed(3))+" / ")]:t._e(),s!==t.convertIonName(s)?[t._v(" "+t._s((t.convertIonRatio(s)*e*t.countPercent(i)[s]).toFixed(3))+" ")]:[t._v(" "+t._s((e*t.countPercent(i)[s]).toFixed(3))+" ")],a&&t.isConcentrationPercent?[t._v(" ("+t._s((e*t.countPercent(i)[s]/(a*t.totalFertilizerMass)*100).toFixed(1))+"%) ")]:t._e()]:[t._v(" - ")]],2)}))],2)})),n("tr",{staticClass:"font-weight-bold"},[n("td",{staticClass:"pl-0 text-center"},[t._v(" Сумма ")]),t._l(t.totalIonConcentration,(function(e,i,a){return[i!==t.convertIonName(i)?n("td",{key:i,staticClass:"text-center",class:{"pr-0":a===t.totalIonConcentration.length-1}},[t.isConvertion&&i!==t.convertIonName(i)?[t._v(" "+t._s((e*t.totalFertilizerMass).toFixed(3))+" / ")]:t._e(),t._v(" "+t._s((t.convertIonRatio(i)*e*t.totalFertilizerMass).toFixed(3))+" ")],2):n("td",{key:i,staticClass:"text-center",class:{"pr-0":a===t.totalIonConcentration.length-1}},[t._v(" "+t._s((e*t.totalFertilizerMass).toFixed(3))+" ")])]}))],2)],2)]},proxy:!0}])}),n("div",{staticClass:"subtitle-2 mt-2"},[t._v(" Соотношение элементов "),n("v-tooltip",{attrs:{bottom:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-icon",t._g({},i),[t._v(" mdi-help-circle-outline ")])]}}])},[t._v(" Учитывает соотношение только между интересующими аквариумиста элементами. Такие элементы как сера, хлор, водород, кислород и т.д. в данном соотношении не участвуют. ")]),t._v(": ")],1),n("div",t._l(t.totalIonConcentration,(function(e,i){return n("span",{key:i,staticClass:"mr-2"},[t._v(" "+t._s(t.convertIonName(i))+" ("+t._s(e?(t.convertIonRatio(i)*e/t.totalUsefulConcentration).toFixed(5):"???")+" %) ")])})),0)],1)},I=[],E=(n("a9e3"),{name:"ElementsDryTable",props:{totalIonConcentration:{type:Object,default:function(){}},fertilizerMass:{type:Object,default:function(){}},totalFertilizerMass:{type:Number,default:0}},data:function(){return{isConcentrationPercent:!1,isConvertion:!1}},computed:{totalUsefulConcentration:function(){var t=this,e=0;return Object.entries(this.totalIonConcentration).forEach((function(n){var i=Object(o["a"])(n,2),a=i[0],s=i[1];e+=t.convertIonRatio(a)*s})),e}},methods:{convertIonRatio:d["c"],convertIonName:d["b"],countPercent:d["d"]}}),N=E,R=n("132d"),z=n("3a2f"),j=Object(C["a"])(N,w,I,!1,null,"5eadf262",null),F=j.exports;O()(j,{VIcon:R["a"],VSimpleTable:S["a"],VSwitch:y["a"],VTooltip:z["a"]});var M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-col",{attrs:{cols:"12"}},[n("p",{staticClass:"display-1"},[t._v(" С вами поделились рецептом! ")]),n("p",[t._v(" Посмотрите рецепт, дайте ему название и напишите примечание. После этого можете сохранить его. ")])])},P=[],H={name:"Shared"},A=H,$=n("62ad"),T=Object(C["a"])(A,M,P,!1,null,"7214e52a",null),K=T.exports;O()(T,{VCol:$["a"]});var D={name:"Recipes",components:{ElementsTable:V,ElementsDryTable:F,draggable:m.a,Recipe:p["a"],Shared:K},data:function(){var t=this;return{FORMULAS:l["a"],RECIPES:u,OPPOSITE:d["a"],drag:!1,reagentsSelected:[],recipeExampleChosen:null,fertilizerVolume:null,tankVolume:null,fertilizerMass:{},solute:{},recipeName:"",recipeNote:null,isShared:!1,isWater:!0,isShowConcentration:!1,curRecipeIndex:null,dialog:this.$route.params.open,dialogShare:!1,timeout:2e3,rulesReagent:[function(t){return t.length>0||"Выберите реагент"}],rulesMass:{solubility:function(t,e,n){return function(i){return i/e*1e3<n[t].solubilityLimit||"Достигнута максимальная растворимость - ".concat(n[t].solubilityLimit," г/л при 20°С!")}},isExist:function(){return function(t){return!!t||"Введите массу"}}},rulesVolume:{isExist:function(){return function(t){return!!t||"Введите объем удобрения"}}},rulesName:[function(t){return!!t||"Введите название"},function(){return!t.isExist||t.isSame||"Рецепт с таким названием уже существует"}]}},mounted:function(){var t=this.$router.currentRoute.query.share;t&&(this.setComponent(JSON.parse(decodeURIComponent(t))[0]),this.isShared=!0),this.recipeName||(this.recipeName=this.fertilizerType)},computed:Object(r["a"])(Object(r["a"])({},Object(h["d"])(["tanks"])),{},{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}},recipes:{get:function(){return this.$store.state.recipes},set:function(t){this.RECIPE_MOVE(t)}},reagents:function(){var t=[];return Object.entries(this.FORMULAS).forEach((function(e){var n=Object(o["a"])(e,2),i=n[0],a=n[1];t.push({text:"".concat(a.name," - ").concat(i),name:"".concat(a.name),value:i})})),t.sort((function(t,e){return t.text.localeCompare(e.text)})),t},recipesExamples:function(){var t=[];return this.RECIPES.forEach((function(e){t.push(e.name)})),t.sort((function(t,e){return t.localeCompare(e)})),t},totalFertilizerMass:function(){return Object.values(this.fertilizerMass).reduce((function(t,e){return t+e}))},concentration:function(){var t=this,e={};return this.reagentsSelected.length>0&&Object.keys(this.fertilizerMass).length>0&&this.reagentsSelected.forEach((function(n){e[n]={};var i=l["a"][n].ions;Object.entries(i).forEach((function(i){var a=Object(o["a"])(i,2),s=a[0],r=a[1];if(r.isNeeded){var c=1;t.fertilizerVolume?c=1/(t.fertilizerVolume/1e3):t.fertilizerVolume||(c=1/t.totalFertilizerMass),e[n][s]=t.fertilizerMass[n]*t.countPercent(n)[s]*c}}))})),e},totalIonConcentration:function(){return this.countTotalIonConcentration(this.concentration)},isExist:function(){var t=this,e=this.recipes.map((function(t){return t.name}));return-1!==e.findIndex((function(e){return e===t.recipeName}))},isSame:function(){var t=this,e=this.recipes.map((function(t){return t.name}));return e.findIndex((function(e){return e===t.recipeName}))===this.curRecipeIndex},isEditing:function(){return null!==this.curRecipeIndex},encodedUrl:function(){var t=JSON.stringify([this.recipes[this.curRecipeIndex]]);t=t.replace(/%/g,"%25");var e=encodeURIComponent(t);return"".concat(window.location.origin+window.location.pathname,"?share=").concat(e)}}),watch:{reagentsSelected:function(){var t=this;if(!this.recipeName&&1===this.reagentsSelected.length){var e=this.reagentsSelected[0];this.recipeName=this.FORMULAS[e].name}var n={};this.reagentsSelected.forEach((function(e){var i=t.FORMULAS[e].ions;n[e]={},Object.entries(i).forEach((function(t){var i=Object(o["a"])(t,2),a=i[0],s=i[1];s.isNeeded&&(n[e][a]=0)}))})),this.solute=Object(r["a"])({},n);var i={};this.reagentsSelected.forEach((function(e){e in t.fertilizerMass?i[e]=t.fertilizerMass[e]:i[e]=0})),this.fertilizerMass=Object(r["a"])({},i),this.fertilizerVolume&&this.countDose()},recipeExampleChosen:function(){var t=this,e=this.RECIPES.find((function(e){return e.name===t.recipeExampleChosen}));e&&(this.reagentsSelected=Object.keys(e.reagents),this.recipeName=e.name,this.recipeNote=e.note,this.fertilizerVolume=e.fertilizerVolume,this.tankVolume=e.tankVolume,Object.keys(e.reagents).forEach((function(n){t.fertilizerMass[n]=e.reagents[n]})))},tankVolume:function(){this.fertilizerVolume&&this.countDose()},dialogShare:function(){this.dialogShare||(this.curRecipeIndex=null)}},methods:Object(r["a"])(Object(r["a"])({},Object(h["c"])(["RECIPE_ADD","RECIPE_REMOVE","RECIPE_EDIT","RECIPE_MOVE","SNACKBAR_SHOW","GUIDE_CLOSE"])),{},{countTotalIonConcentration:d["f"],countTotalIonDose:d["g"],countTotalDose:d["e"],isConcentration:d["h"],countPercent:d["d"],convertIonName:d["b"],convertIonRatio:d["c"],resetComponent:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.reagentsSelected=[],this.recipeExampleChosen=null,this.fertilizerMass={},this.fertilizerVolume=null,this.recipeName="",this.recipeNote=null,this.tankVolume=null,this.curRecipeIndex=null,this.solute={},this.dialog=t,this.isWater=!0,this.isShared=!1},setComponent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.fertilizerType=t.type,this.reagentsSelected=t.reagents,this.fertilizerMass=t.mass,this.fertilizerVolume=t.volume,this.tankVolume=t.tankVolume,this.recipeName=t.name,this.recipeNote=t.note,this.curRecipeIndex=e,this.dialog=!0,this.isWater=t.volume>0},countDose:function(){var t=this;this.reagentsSelected.forEach((function(e){var n=l["a"][e].ions,i={};Object.entries(n).forEach((function(n){var a=Object(o["a"])(n,2),s=a[0],r=a[1];if(r.isNeeded){var l=t.fertilizerMass[e]/t.fertilizerVolume/t.tankVolume*(t.countPercent(e)[s]*t.convertIonRatio(s)*1e3);l=parseFloat(l.toFixed(5)),i[s]=l,c["a"].set(t.solute,e,i)}}))}))},setIsWater:function(t){this.isWater=t,this.fertilizerVolume=null,this.tankVolume=null},inputMass:function(t,e){var n=parseFloat(t);c["a"].set(this.fertilizerMass,e,+n?n:""),this.tankVolume&&+n&&this.countDose()},inputVolume:function(t){this.fertilizerVolume=parseFloat(t),this.tankVolume&&+this.fertilizerVolume&&this.countDose()},inputIonDose:function(t,e,n){var i=this,a={},s={};Object.keys(this.solute[e]).forEach((function(t){s[t]=i.convertIonRatio(t)})),Object.keys(this.solute[e]).forEach((function(o){var r=parseFloat(t);o!==n&&(s[n]>1?r/=s[n]:r*=s[o],r*=i.countPercent(e)[o]/i.countPercent(e)[n]),a[o]=parseFloat(r)?parseFloat(r.toFixed(4)):0,c["a"].set(i.solute,e,a)}));var o,l=Object(r["a"])({},this.fertilizerMass);o=this.solute[e][n]?this.solute[e][n]*this.tankVolume*this.fertilizerVolume/1e3/this.countPercent(e)[n]/this.convertIonRatio(n):0,l[e]=parseFloat(o.toFixed(3)),this.fertilizerMass=Object(r["a"])({},l)},fertilizerMassHint:function(t){var e=this,n="";return Object.keys(this.FORMULAS[t].ions).forEach((function(i){var a=e.FORMULAS[t].ions[i];a.isNeeded&&(i!==e.convertIonName(i)?n+="".concat(i,"/").concat(e.convertIonName(i),":\n            ").concat(e.concentration[t][i].toFixed(2),"/").concat((e.convertIonRatio(i)*e.concentration[t][i]).toFixed(2)," г/л"):n+="".concat(i,":  ").concat(e.concentration[t][i].toFixed(3)," г/л "))})),n},openAddRecipe:function(){this.resetComponent(),this.dialog=!0,this.$refs.recipeForm&&this.$refs.recipeForm.resetValidation()},addRecipe:function(){this.$refs.recipeForm.validate()&&(this.RECIPE_ADD({type:this.fertilizerType,name:this.recipeName,note:this.recipeNote,volume:this.fertilizerVolume,reagents:Object(s["a"])(this.reagentsSelected),mass:Object(r["a"])({},this.fertilizerMass),concentration:Object(r["a"])({},this.concentration),tankVolume:this.tankVolume}),this.resetComponent(),this.SNACKBAR_SHOW("Рецепт добавлен"))},openEditRecipe:function(t){this.resetComponent(),this.setComponent(this.recipes[t],t),this.$refs.recipeForm&&this.$refs.recipeForm.resetValidation()},editRecipe:function(){this.$refs.recipeForm.validate()&&(this.RECIPE_EDIT({index:this.curRecipeIndex,recipe:{type:this.fertilizerType,name:this.recipeName,note:this.recipeNote,volume:this.fertilizerVolume,tankVolume:this.tankVolume,reagents:Object(s["a"])(this.reagentsSelected),mass:Object(r["a"])({},this.fertilizerMass),concentration:Object(r["a"])({},this.concentration)}}),this.resetComponent(),this.SNACKBAR_SHOW("Рецепт изменен"))},removeRecipe:function(){this.RECIPE_REMOVE(this.curRecipeIndex),this.resetComponent(),this.SNACKBAR_SHOW("Рецепт удален")},showComponents:function(t){var e=[];return Object.entries(t).forEach((function(t){var n=Object(o["a"])(t,2),i=n[0],a=n[1];e.push("".concat(i,": ").concat((100*a).toFixed(1),"%"))})),e.join(" ")},openShareDialog:function(t){this.curRecipeIndex=t,this.dialogShare=!0},copyUrl:function(){var t=document.getElementById("encodedUrl");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),this.SNACKBAR_SHOW("Ссылка скопирована")}})},W=D,q=(n("a7df"),n("8336")),U=n("b0af"),B=n("99d9"),L=n("2b5d"),J=n("a523"),Z=n("169a"),G=n("ce7e"),Q=n("0789"),X=n("cd55"),Y=n("49e2"),tt=n("c865"),et=n("0393"),nt=n("4bd4"),it=n("67b6"),at=n("43a6"),st=n("0fd9"),ot=n("b974"),rt=n("2fa4"),ct=n("8654"),lt=n("a844"),ut=n("71d9"),dt=n("2a7f"),ht=Object(C["a"])(W,i,a,!1,null,null,null);e["default"]=ht.exports;O()(ht,{VBtn:q["a"],VCard:U["a"],VCardActions:B["a"],VCardText:B["c"],VCardTitle:B["d"],VCol:$["a"],VCombobox:L["a"],VContainer:J["a"],VDialog:Z["a"],VDivider:G["a"],VExpandTransition:Q["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Y["a"],VExpansionPanelHeader:tt["a"],VExpansionPanels:et["a"],VForm:nt["a"],VIcon:R["a"],VRadio:it["a"],VRadioGroup:at["a"],VRow:st["a"],VSelect:ot["a"],VSpacer:rt["a"],VTextField:ct["a"],VTextarea:lt["a"],VToolbar:ut["a"],VToolbarTitle:dt["a"],VTooltip:z["a"]})}}]);
//# sourceMappingURL=chunk-2ebc671e.e81f3967.js.map