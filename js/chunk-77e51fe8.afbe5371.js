(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77e51fe8"],{"0fd9":function(t,e,s){"use strict";var n=s("ade3"),i=s("5530"),a=(s("caad"),s("2532"),s("99af"),s("b64b"),s("ac1f"),s("5319"),s("4ec9"),s("d3b7"),s("3ca3"),s("ddb0"),s("159b"),s("4b85"),s("2b0e")),r=s("d9f7"),c=s("80d2"),o=["sm","md","lg","xl"],l=["start","end","center"];function u(t,e){return o.reduce((function(s,n){return s[t+Object(c["z"])(n)]=e(),s}),{})}var d=function(t){return[].concat(l,["baseline","stretch"]).includes(t)},p=u("align",(function(){return{type:String,default:null,validator:d}})),h=function(t){return[].concat(l,["space-between","space-around"]).includes(t)},v=u("justify",(function(){return{type:String,default:null,validator:h}})),f=function(t){return[].concat(l,["space-between","space-around","stretch"]).includes(t)},m=u("alignContent",(function(){return{type:String,default:null,validator:f}})),b={align:Object.keys(p),justify:Object.keys(v),alignContent:Object.keys(m)},g={align:"align",justify:"justify",alignContent:"align-content"};function y(t,e,s){var n=g[t];if(null!=s){if(e){var i=e.replace(t,"");n+="-".concat(i)}return n+="-".concat(s),n.toLowerCase()}}var _=new Map;e["a"]=a["a"].extend({name:"v-row",functional:!0,props:Object(i["a"])(Object(i["a"])(Object(i["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d}},p),{},{justify:{type:String,default:null,validator:h}},v),{},{alignContent:{type:String,default:null,validator:f}},m),render:function(t,e){var s=e.props,i=e.data,a=e.children,c="";for(var o in s)c+=String(s[o]);var l=_.get(c);return l||function(){var t,e;for(e in l=[],b)b[e].forEach((function(t){var n=s[t],i=y(e,t,n);i&&l.push(i)}));l.push((t={"no-gutters":s.noGutters,"row--dense":s.dense},Object(n["a"])(t,"align-".concat(s.align),s.align),Object(n["a"])(t,"justify-".concat(s.justify),s.justify),Object(n["a"])(t,"align-content-".concat(s.alignContent),s.alignContent),t)),_.set(c,l)}(),t(s.tag,Object(r["a"])(i,{staticClass:"row",class:l}),a)}})},1648:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"mb-12"},[s("v-row",[s("page-title",[t._v(" Расписание ")]),s("guide",[t._v(" На этой странице можно составить расписание внесения удобрений в аквариум. "),s("br"),s("br"),t._v(" Калькулятор сам рассчитает концентрации элементов, по которым можно прикинуть дозировки вносимых удобрений. А так же предложит составить расписание. ")]),0===t.schedules.length?s("v-col",{attrs:{cols:"12",md:"8","offset-md":"2"}},[s("p",{staticClass:"mb-8",class:{"text-h6":t.$vuetify.breakpoint["xs"],"text-h5":t.$vuetify.breakpoint["smAndUp"]}},[t._v(" У вас нет ни одного расписания ")])]):t._e(),s("v-col",{attrs:{cols:"12",md:"8","offset-md":"2"}},t._l(t.schedules,(function(t,e){return s("Schedule",{key:t.tank.name+" + "+e,attrs:{"schedule-index":e}})})),1)],1),s("add-button",{attrs:{action:t.openAddSchedule}},[t._v(" Добавить расписание ")])],1)},i=[],a=s("5530"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"mb-2"},[s("v-card-title",{staticClass:"headline d-flex justify-space-between align-start flex-nowrap"},[s("div",{staticClass:"no-break"},[t._v(" "+t._s(t.schedule.tank.name)+" ")])]),s("v-card-subtitle",[s("span",[t._v("Объем: "+t._s(t.schedule.tank.volume)+" л")])]),s("v-card-text",[s("v-stepper",{attrs:{"alt-labels":""},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[s("v-stepper-items",t._l(t.schedule.daysTotal,(function(e,n){return s("v-stepper-content",{key:e+"-content",staticClass:"pa-0 pb-8",attrs:{step:e}},[s("div",{staticClass:"d-flex flex-column text-h4 text-center mb-4"},[s("div",[s("span",{staticStyle:{"text-transform":"capitalize"}},[t._v(t._s(t.schedule.datesColumn[n].weekday))]),t._v(", "),s("span",[t._v(t._s(t.schedule.datesColumn[n].date))])]),s("div",{staticClass:"text-center text-body-1"},[t._v(" "+t._s(t._f("format")(t.schedule.datesRange[0],"DD MMMM"))+" - "+t._s(t._f("format")(t.schedule.datesRange[1],"DD MMMM"))+" ")])]),t._l(t.daysQuotas,(function(i,a){return s("div",{key:a+e},[s("v-row",[s("v-col",{staticClass:"py-1",attrs:{cols:"12",sm:"10","offset-sm":"1"}},[s("v-btn",{staticClass:"mb-2 px-3",staticStyle:{"max-width":"100%"},attrs:{disabled:!t.schedule.selected[a][n],block:"","x-large":"",tile:"",color:["primary","primary","grey"][t.schedule.completed[a][n]],outlined:[!0,!1,!0][t.schedule.completed[a][n]]},on:{click:function(e){return t.clickDay(a,n)}},scopedSlots:t._u([{key:"default",fn:function(){return[s("div",{staticClass:"d-flex align-center w-100"},[0===t.schedule.completed[a][n]?s("v-icon",{attrs:{color:"primary"}},[t._v(" far fa-circle ")]):t._e(),1===t.schedule.completed[a][n]?s("v-icon",{attrs:{color:"white"}},[t._v(" far fa-check-circle ")]):t._e(),2===t.schedule.completed[a][n]?s("v-icon",{attrs:{color:"grey"}},[t._v(" far fa-times-circle ")]):t._e(),s("div",{staticClass:"d-flex justify-start justify-sm-center text-truncate flex-grow-1 text-subtitle-2\n                        text-sm-h6 font-weight-regular mx-2"},[s("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",position:"relative",top:"1px"}},[t._v(" "+t._s(a)+" ")])]),s("div",{staticClass:"d-flex flex-column align-end flex-shrink-1 ml-auto"},[s("div",{staticClass:"text-h6 text-sm-h5"},[t._v(" "+t._s(i[n].toFixed(1))+" ")]),s("div",{staticClass:"d-none d-sm-block caption mt-n2"},[t._v(" "+t._s(t.totalSum[a]["sum"].toFixed(1))+" / "+t._s(t.totalSum[a]["amount"].toFixed(1))+" ")])])],1)]},proxy:!0}],null,!0)})],1)],1)],1)}))],2)})),1),t.$vuetify.breakpoint["smAndUp"]?s("v-stepper-header",[t._l(t.schedule.daysTotal,(function(e,n){return[s("v-stepper-step",{key:e+"-step",attrs:{step:e,complete:t.isCompletedDay[n],editable:""}},[s("span",{staticStyle:{"text-transform":"capitalize"}},[t._v(t._s(t.schedule.datesColumn[n].weekday))])]),e!==t.schedule.daysTotal?s("v-divider",{key:e}):t._e()]}))],2):t._e()],1)],1),s("v-card-actions",[s("v-btn",{staticClass:"ml-auto",attrs:{text:"",disabled:t.activeIndex<=1},on:{click:t.prevStep}},[t._v(" Назад ")]),s("v-btn",{staticClass:"ml-0 ml-sm-3",attrs:{text:"",disabled:t.activeIndex===t.schedule.daysTotal},on:{click:t.nextStep}},[t._v(" Далее ")]),s("v-btn",{staticClass:"ml-0 ml-sm-3",attrs:{text:""},on:{click:function(e){return t.$router.push("/schedules/"+t.scheduleIndex)}}},[t._v(" Открыть ")])],1),s("v-progress-linear",{attrs:{value:t.progressValue}})],1)},c=[],o=s("2909"),l=(s("a9e3"),s("b64b"),s("159b"),s("b0c0"),s("4de4"),s("cb29"),s("c740"),s("2f62")),u={name:"Schedule",props:{scheduleIndex:{type:[String,Number],default:0}},data:function(){return{activeIndex:1}},created:function(){this.activeIndex=this.findCurActiveDay()},computed:Object(a["a"])(Object(a["a"])({},Object(l["d"])(["schedules"])),{},{schedule:function(){return this.schedules[this.scheduleIndex]},daysQuotas:function(){var t=this;if(0===Object.keys(this.schedule.completed).length)return null;var e={};return this.schedule.recipesSelected.forEach((function(s){var n=[],i=t.schedule.selected[s.name],a=t.schedule.completed[s.name],r=i.filter((function(t){return!1===t})).length,c=t.schedule.daysTotal-r,l=parseFloat(s.amount),u=l/(t.schedule.daysTotal-r);Object.keys(Object(o["a"])(Array(t.schedule.daysTotal))).forEach((function(t){switch(!0){case 1===a[t]:u=l/c,l-=u,c-=1;break;case!i[t]:u=0;break;case 2===a[t]:u=0,c-=1;break;default:u=l/c}n.push(u)})),e[s.name]=n})),e},totalSum:function(){var t=this,e={};return this.schedule.recipesSelected.forEach((function(s){var n=0;Object.keys(t.daysQuotas[s.name]).forEach((function(e){t.schedule.completed[s.name][e]&&(n+=t.daysQuotas[s.name][e])})),e[s.name]={sum:n,amount:s.amount}})),e},isCompletedDay:function(){var t=this,e=Array(this.schedule.daysTotal).fill(!1);return e.forEach((function(s){var n=0;Object.keys(t.schedule.selected).forEach((function(e){var i=t.schedule.completed[e][s],a=t.schedule.selected[e][s];a&&1!==i&&2!==i||(n+=1)})),n===Object.keys(t.schedule.completed).length&&(0===parseInt(s,10)||e[s-1])&&(e[s]=!0)})),e},progressValue:function(){var t=this,e=0,s=0;return Object.keys(this.totalSum).forEach((function(n){s+=parseFloat(t.totalSum[n].amount),e+=parseFloat(t.totalSum[n].sum)})),e/s*100}}),methods:Object(a["a"])(Object(a["a"])({},Object(l["c"])(["SCHEDULE_COMPLETE"])),{},{clickDay:function(t,e){this.SCHEDULE_COMPLETE({indexSchedule:this.scheduleIndex,indexDay:e,recipeName:t})},prevStep:function(){this.activeIndex>1&&(this.activeIndex-=1)},nextStep:function(){this.activeIndex<this.schedule.daysTotal&&(this.activeIndex+=1)},findCurActiveDay:function(){var t=Object(o["a"])(this.isCompletedDay);t.reverse();var e=t.findIndex((function(t){return!0===t}));e=-1===e?t.length:e;var s=t.length-e+1;return s>t.length&&(s=t.length),s}})},d=u,p=(s("9a92"),s("2877")),h=s("6544"),v=s.n(h),f=s("8336"),m=s("b0af"),b=s("99d9"),g=s("62ad"),y=s("ce7e"),_=s("132d"),x=s("8e36"),C=s("0fd9"),S=(s("0481"),s("8836"),s("10d2")),j=s("3206"),k=s("a452"),O=s("58df"),w=s("d9bd"),V=Object(O["a"])(S["a"],Object(j["b"])("stepper"),k["a"]),$=V.extend({name:"v-stepper",provide:function(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{altLabels:Boolean,nonLinear:Boolean,flat:Boolean,vertical:Boolean},data:function(){var t={isBooted:!1,steps:[],content:[],isReverse:!1};return t.internalLazyValue=null!=this.value?this.value:(t[0]||{}).step||1,t},computed:{classes:function(){return Object(a["a"])({"v-stepper--flat":this.flat,"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear},S["a"].options.computed.classes.call(this))},styles:function(){return Object(a["a"])({},S["a"].options.computed.styles.call(this))}},watch:{internalValue:function(t,e){this.isReverse=Number(t)<Number(e),e&&(this.isBooted=!0),this.updateView()}},created:function(){this.$listeners.input&&Object(w["a"])("@input","@change",this)},mounted:function(){this.updateView()},methods:{register:function(t){"v-stepper-step"===t.$options.name?this.steps.push(t):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content.push(t))},unregister:function(t){"v-stepper-step"===t.$options.name?this.steps=this.steps.filter((function(e){return e!==t})):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content=this.content.filter((function(e){return e!==t})))},stepClick:function(t){var e=this;this.$nextTick((function(){return e.internalValue=t}))},updateView:function(){for(var t=this.steps.length;--t>=0;)this.steps[t].toggle(this.internalValue);for(var e=this.content.length;--e>=0;)this.content[e].toggle(this.internalValue,this.isReverse)}},render:function(t){return t(this.tag,{staticClass:"v-stepper",class:this.classes,style:this.styles},this.$slots.default)}}),I=(s("d3b7"),s("25f0"),s("0789")),E=s("80d2"),A=Object(O["a"])(Object(j["a"])("stepper","v-stepper-content","v-stepper")),T=A.extend().extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data:function(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{computedTransition:function(){var t=this.$vuetify.rtl?!this.isReverse:this.isReverse;return t?I["g"]:I["h"]},styles:function(){return this.isVertical?{height:Object(E["f"])(this.height)}:{}}},watch:{isActive:function(t,e){t&&null==e?this.height="auto":this.isVertical&&(this.isActive?this.enter():this.leave())}},mounted:function(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition:function(t){this.isActive&&"height"===t.propertyName&&(this.height="auto")},enter:function(){var t=this,e=0;requestAnimationFrame((function(){e=t.$refs.wrapper.scrollHeight})),this.height=0,setTimeout((function(){return t.isActive&&(t.height=e||"auto")}),450)},leave:function(){var t=this;this.height=this.$refs.wrapper.clientHeight,setTimeout((function(){return t.height=0}),10)},toggle:function(t,e){this.isActive=t.toString()===this.step.toString(),this.isReverse=e}},render:function(t){var e={staticClass:"v-stepper__content"},s={staticClass:"v-stepper__wrapper",style:this.styles,ref:"wrapper"};this.isVertical||(e.directives=[{name:"show",value:this.isActive}]);var n=t("div",s,[this.$slots.default]),i=t("div",e,[n]);return t(this.computedTransition,{on:this.$listeners},[i])}}),D=s("9d26"),B=s("a9ad"),L=s("5607"),P=Object(O["a"])(B["a"],Object(j["a"])("stepper","v-stepper-step","v-stepper")),M=P.extend().extend({name:"v-stepper-step",directives:{ripple:L["a"]},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},errorIcon:{type:String,default:"$error"},rules:{type:Array,default:function(){return[]}},step:[Number,String]},data:function(){return{isActive:!1,isInactive:!0}},computed:{classes:function(){return{"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error error--text":this.hasError,"v-stepper__step--complete":this.complete}},hasError:function(){return this.rules.some((function(t){return!0!==t()}))}},mounted:function(){this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.stepper&&this.stepper.unregister(this)},methods:{click:function(t){t.stopPropagation(),this.$emit("click",t),this.editable&&this.stepClick(this.step)},genIcon:function(t){return this.$createElement(D["a"],t)},genLabel:function(){return this.$createElement("div",{staticClass:"v-stepper__label"},this.$slots.default)},genStep:function(){var t=!(this.hasError||!this.complete&&!this.isActive)&&this.color;return this.$createElement("span",this.setBackgroundColor(t,{staticClass:"v-stepper__step__step"}),this.genStepContent())},genStepContent:function(){var t=[];return this.hasError?t.push(this.genIcon(this.errorIcon)):this.complete?this.editable?t.push(this.genIcon(this.editIcon)):t.push(this.genIcon(this.completeIcon)):t.push(String(this.step)),t},toggle:function(t){this.isActive=t.toString()===this.step.toString(),this.isInactive=Number(t)<Number(this.step)}},render:function(t){return t("div",{staticClass:"v-stepper__step",class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click}},[this.genStep(),this.genLabel()])}}),R=Object(E["h"])("v-stepper__header"),N=Object(E["h"])("v-stepper__items"),F=Object(p["a"])(d,r,c,!1,null,null,null),z=F.exports;v()(F,{VBtn:f["a"],VCard:m["a"],VCardActions:b["a"],VCardSubtitle:b["b"],VCardText:b["c"],VCardTitle:b["d"],VCol:g["a"],VDivider:y["a"],VIcon:_["a"],VProgressLinear:x["a"],VRow:C["a"],VStepper:$,VStepperContent:T,VStepperHeader:R,VStepperItems:N,VStepperStep:M});var H={name:"Schedules",components:{Schedule:z},computed:Object(a["a"])({},Object(l["d"])(["schedules"])),methods:{openAddSchedule:function(){return this.$router.push("/schedules/create")}}},Q=H,U=s("a523"),q=Object(p["a"])(Q,n,i,!1,null,"2a377982",null);e["default"]=q.exports;v()(q,{VCol:g["a"],VContainer:U["a"],VRow:C["a"]})},"18bc":function(t,e,s){},8836:function(t,e,s){},"8ce9":function(t,e,s){},"9a92":function(t,e,s){"use strict";s("18bc")},a523:function(t,e,s){"use strict";s("4de4"),s("b64b"),s("2ca0"),s("99af"),s("20f6"),s("4b85"),s("498a"),s("a15b");var n=s("2b0e");function i(t){return n["a"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,s){var n=s.props,i=s.data,a=s.children;i.staticClass="".concat(t," ").concat(i.staticClass||"").trim();var r=i.attrs;if(r){i.attrs={};var c=Object.keys(r).filter((function(t){if("slot"===t)return!1;var e=r[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}));c.length&&(i.staticClass+=" ".concat(c.join(" ")))}return n.id&&(i.domProps=i.domProps||{},i.domProps.id=n.id),e(n.tag,i,a)}})}var a=s("d9f7");e["a"]=i("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var s,n=e.props,i=e.data,r=e.children,c=i.attrs;return c&&(i.attrs={},s=Object.keys(c).filter((function(t){if("slot"===t)return!1;var e=c[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}))),n.id&&(i.domProps=i.domProps||{},i.domProps.id=n.id),t(n.tag,Object(a["a"])(i,{staticClass:"container",class:Array({"container--fluid":n.fluid}).concat(s||[])}),r)}})},ce7e:function(t,e,s){"use strict";var n=s("5530"),i=(s("8ce9"),s("7560"));e["a"]=i["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:Object(n["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(n["a"])({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})}}]);
//# sourceMappingURL=chunk-77e51fe8.afbe5371.js.map