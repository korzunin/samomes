(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-412d8760"],{1681:function(t,e,n){},"1f4f":function(t,e,n){"use strict";var s=n("5530"),a=(n("a9e3"),n("8b37"),n("80d2")),o=n("7560"),i=n("58df");e["a"]=Object(i["a"])(o["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(s["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(a["f"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},2681:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"mb-12"},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"8","offset-sm":"2"}},[n("v-btn",{staticClass:"mr-0",attrs:{square:"",to:"/recipes"}},[n("v-icon",[t._v("mdi-chevron-left")])],1)],1),n("page-title",[t.isCreate&&!t.isShared?[t.isShared?t._e():[t._v(" Новый рецепт ")],t.isShared?[n("p",{staticClass:"text-h4"},[t._v(" С вами поделились рецептом! ")]),n("p",{staticClass:"text-h6 font-weight-regular"},[t._v(" Посмотрите рецепт, дайте ему название и напишите примечание. После этого можете сохранить его. ")])]:t._e()]:[t._v(" Рецепт "+t._s(t.name)+" ")]],2),n("v-col",{attrs:{cols:"12",md:"8","offset-md":"2"}},[n("v-form",{ref:"recipeForm"},[n("v-row",[n("v-col",{staticClass:"pt-0 mt-8",attrs:{cols:"12"}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-select",{attrs:{items:t.formulas,"item-text":"text",multiple:"",label:"Формула",hint:"Вы можете выбрать несколько реагентов","persistent-hint":"","hide-details":"auto",rules:t.rulesReagent,"return-object":!0},model:{value:t.reagents,callback:function(e){t.reagents=e},expression:"reagents"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-select",{attrs:{items:t.recipesExamples,label:"Рецепт",hint:"или выбрать один из рецептов","persistent-hint":"","hide-details":"auto"},model:{value:t.recipeExampleChosen,callback:function(e){t.recipeExampleChosen=e},expression:"recipeExampleChosen"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-select",{attrs:{items:t.compoundsList,"item-text":"text",multiple:"",label:"Готовая смесь",hint:"Вы можете выбрать несколько смесей","persistent-hint":"","hide-details":"auto",rules:t.rulesReagent,"return-object":!0},model:{value:t.compounds,callback:function(e){t.compounds=e},expression:"compounds"}})],1),t.isReagents?n("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[n("div",{staticClass:"mt-3"},[t._l(t.reagents,(function(e){return[n("div",{key:e.value,staticClass:"d-flex justify-space-between caption"},[n("div",[t._v(t._s(e.key))]),n("div",[t._v(t._s(t.showComponents(t.countPercent(e.key))))])])]})),t._l(t.compounds,(function(e){return[n("div",{key:e.name,staticClass:"d-flex justify-space-between caption"},[n("div",[t._v(t._s(e.name))]),n("div",[t._v(t._s(t.showComponents(e.ions)))])])]}))],2),n("div",{staticClass:"mt-3"},[n("small",[t._v(" *Так как аквариумисту удобнее работать с нитратом (NO3), а не с азотом (N), далее азот в любой форме будет приведен к нитрату. ")])])]):t._e(),n("v-expand-transition",[t.isReagents?n("v-col",{attrs:{cols:"12"}},[n("v-radio-group",{attrs:{value:t.isWater,row:"","hide-details":"auto"},on:{change:t.setIsWater}},[n("v-radio",{attrs:{label:"Водный раствор",value:!0}}),n("v-radio",{attrs:{label:"Безводная смесь",value:!1}})],1)],1):t._e()],1),n("v-expand-transition",[t.isReagents&&t.isWater?n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{value:t.volume,type:"number",label:"Введите объем удобрения",suffix:"мл",hint:"Выбирайте объем, который вы сможете использовать в течении 2-3x месяцев.\n                            Обычно это 250-300 мл.","hide-details":"auto",rules:[!t.isWater||t.rulesVolume.isExist()]},on:{input:t.inputVolume}})],1):t._e()],1),n("v-expand-transition",[!t.isReagents||!t.volume&&t.isWater?t._e():n("v-col",{attrs:{cols:"12"}},[n("v-row",[t.isWater?n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"d-flex align-center"},[n("v-divider"),n("span",{staticClass:"mx-3"},[t._v(" Введите массу реагента "),n("v-tooltip",{attrs:{bottom:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n("v-icon",t._g({},s),[t._v("mdi-help-circle-outline")])]}}],null,!1,2575987712)},[t._v(" Введите массу реагента и калькулятор автоматически рассчитает дозы элементов, которые показаны ниже. ")])],1),n("v-divider")],1)]):t._e(),t._l(t.reagents,(function(e){return n("v-col",{key:e.key,staticClass:"py-0",attrs:{cols:"12"}},[n("v-text-field",{key:e.key,attrs:{value:t.mass[e.key],label:e.text,type:"number",suffix:"г","hide-details":"auto",rules:[t.rulesMass.isExist()],error:t.mass[e.key]/t.volume*1e3>t.FORMULAS[e.key].solubilityLimit,"error-messages":t.mass[e.key]/t.volume*1e3>t.FORMULAS[e.key].solubilityLimit?"Достигнута максимальная растворимость -\n                                    "+t.FORMULAS[e.key].solubilityLimit+" г/л при 20°С!":""},on:{input:function(n){return t.inputMass(n,e.key)}}})],1)})),t._l(t.compounds,(function(e){return n("v-col",{key:e.key,staticClass:"py-0",attrs:{cols:"12"}},[n("v-text-field",{key:e.key,attrs:{value:t.mass[e.key],label:e.text,suffix:"г",type:"number","hide-details":"auto",rules:[t.rulesMass.isExist()]},on:{input:function(n){return t.inputMass(n,e.key)}}})],1)})),t.isWater?n("v-col",{staticClass:"mt-2 pb-0",attrs:{cols:"12"}},[n("v-btn",{staticClass:"px-0",attrs:{center:"",text:""},on:{click:function(e){t.isShowConcentration=!t.isShowConcentration}}},[t._v(" Показать концентрации "),n("v-icon",[t._v(t._s(t.isShowConcentration?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1):t._e(),n("v-expand-transition",[t.isShowConcentration&&t.isWater?n("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[n("elements-table",{attrs:{"total-ion-concentration":t.totalIonConcentration,"fertilizer-mass":t.mass,concentration:t.concentration}})],1):t._e()],1),n("v-expand-transition",[t.isWater?t._e():n("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[n("elements-dry-table",{attrs:{"total-ion-concentration":t.totalIonConcentration,"fertilizer-mass":t.mass,"total-fertilizer-mass":t.totalFertilizerMass}})],1)],1),t.isWater?n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"d-flex align-center"},[n("v-divider"),n("span",{staticClass:"mx-3"},[t._v(" Или введите дозу элемента "),n("v-tooltip",{attrs:{bottom:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n("v-icon",t._g({},s),[t._v("mdi-help-circle-outline")])]}}],null,!1,2575987712)},[t._v(" Калькулятор автоматически рассчитает необходимую массу реагента. Доза - это количество элемента, на которую повысится концентрация элемента в заданном объеме аквариума при внесении 1 мл удобрения. Например, вы хотите сделать макро удобрение с нитратом. И для удобства введения его в аквариум вы бы хотели, чтобы на каждый вводимый 1 мл удобрения, нитрат повышался на 0.5 мг/л. 0.5 - это доза. ")])],1),n("v-divider")],1)]):t._e(),n("v-expand-transition",[t.isReagents&&t.isWater?n("v-col",{attrs:{cols:"12"}},[n("v-combobox",{attrs:{items:t.tanks,type:"Number","item-text":"name","item-value":"volume",label:"Объем аквариума","persistent-hint":"","hide-selected":"",hint:"Выберите аквариум или введите объем",suffix:"л","return-object":!1},model:{value:t.tankVolume,callback:function(e){t.tankVolume=t._n(e)},expression:"tankVolume"}})],1):t._e()],1),t.tankVolume&&t.isWater?n("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[n("v-row",[t._l(t.reagents,(function(e){return[n("v-col",{key:e.key,staticClass:"py-0",attrs:{cols:"12"}},[n("v-row",{staticClass:"mb-3"},[t._l(t.FORMULAS[e.key].ions,(function(s,a){return[s.isNeeded?n("v-col",{key:e.key+a,staticClass:"py-0"},[n("v-text-field",{attrs:{value:t.solute[e.key][a],type:"number",label:t.convertIonName(a)+", мг/л",hint:"из "+e.key,"persistent-hint":""},on:{input:function(n){return t.inputIonDose(n,e.key,a)}}})],1):t._e()]}))],2)],1)]})),t._l(t.compounds,(function(e){return[n("v-col",{key:e.key,staticClass:"py-0",attrs:{cols:"12"}},[n("v-row",{staticClass:"mb-3"},[t._l(Object.keys(e.ions),(function(s){return[n("v-col",{key:e.key+s,staticClass:"py-0"},[n("v-text-field",{attrs:{value:t.solute[e.key][s],label:t.convertIonName(s)+", мг/л",hint:"из "+e.key,type:"number","persistent-hint":""},on:{input:function(n){return t.inputIonDose(n,e.key,s)}}})],1)]}))],2)],1)]})),t.isReagents?n("v-col",{staticClass:"d-flex justify-space-between pb-0",attrs:{cols:"12"}},[n("div",[t._v(" Общая доза, мг/л ")]),n("div",{staticClass:"d-flex flex-column"},t._l(t.countTotalIonDose(t.solute),(function(e,s){return n("div",{key:s,staticClass:"d-flex justify-space-between"},[n("div",[t._v(t._s(t.convertIonName(s))+":")]),n("div",{staticClass:"ml-3"},[t._v(" "+t._s(e.toFixed(3))+" "),t.countTotalDose(t.solute)?[t._v(" ("+t._s((e/t.countTotalDose(t.solute)*100).toFixed(2))+"%) ")]:t._e()],2)])})),0)]):t._e()],2)],1):t._e()],2)],1)],1),n("v-expand-transition",[!t.isReagents||!t.volume&&t.isWater?t._e():n("v-col",{attrs:{cols:"12"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Имя рецепта","hide-details":"auto",hint:"Придумайте имя рецепта, чтобы не путать его с другими рецептами",rules:t.rulesName},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{label:"Примечание","hide-details":"auto","auto-grow":"",rows:"1",hint:"Вы можете добавить дополнительные сведения к рецепту"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1),n("v-col",{staticClass:"text-right",attrs:{cols:"12"}},[t.isCreate?t._e():n("v-btn",{on:{click:t.removeRecipe}},[t._v(" Удалить ")]),t.isCreate?t._e():n("v-btn",{staticClass:"ml-2",attrs:{color:"primary"},on:{click:t.editRecipe}},[t._v(" Сохранить ")]),t.isCreate?n("v-btn",{attrs:{color:"primary"},on:{click:t.addRecipe}},[t._v(" Добавить ")]):t._e()],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},a=[],o=n("2909"),i=n("5530"),r=n("3835"),c=(n("159b"),n("caad"),n("2532"),n("4fad"),n("99af"),n("b0c0"),n("4e827"),n("07ac"),n("b64b"),n("d81d"),n("c740"),n("7db0"),n("b680"),n("a15b"),n("2b0e")),u=n("e8d1"),l=n("3c2b"),h=[{name:"Kuban Aquariums Нитрат",reagents:{KNO3:49.71,"(NH2)2CO":5.02,NH4NO3:6.71,C6H7KO2:.5},tankVolume:100,volume:1e3,note:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Фосфат",reagents:{KH2PO4:7.01,C6H7KO2:.5},tankVolume:100,volume:1e3,note:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Калий",reagents:{K2SO4:84.76,C6H7KO2:.5},tankVolume:100,volume:1e3,note:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Реминерализатор",reagents:{"CaSO4(H2O)2":1.88,"MgSO4(H2O)7":1.28},note:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Микро",reagents:{H3BO3:.7,"C10H14N2Na2O8(H2O)2":3,"MgSO4(H2O)7":30,K2SO4:20,C6H8O6:3,C6H7KO2:.5},compounds:{AgroMicsT:11,"Fe-EDTA13":5.6},volume:1e3,note:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Aqua Botanic Нитрат",reagents:{KNO3:82.88},tankVolume:100,volume:1e3,note:"Чистая калиевая селитра. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Нитрат+",reagents:{KNO3:49.71,"(NH2)2CO":5.02,NH4NO3:6.71},tankVolume:100,volume:1e3,note:"Калиевая селитра, разбавленная мочевиной и нитратом аммония. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Фосфат",reagents:{KH2PO4:7.01},tankVolume:100,volume:1e3,note:"Чистый монофосфат калия. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Калий",reagents:{K2SO4:84.76},tankVolume:100,volume:1e3,note:"Чистый сульфат калия. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"NPK Amania.org 1:15",reagents:{KNO3:106.45,KH2PO4:5.77},tankVolume:100,volume:1e3,note:"Макро в соотношении 1 к 15. Рецепт взят с сайта amania.org"},{name:"NPK Amania.org 1:15 + амидный азот",reagents:{KNO3:53.6,"(NH2)2CO":16,KH2PO4:5.77},tankVolume:100,volume:1e3,note:"Макро в соотношении 1 к 15. Калиевая селитра в соотношении 50 на 50 с мочевиной. Рецепт взят с сайта amania.org"},{name:"Удо Ермолаева. МИКРО",reagents:{K2SO4:7.45,"MgSO4(H2O)7":16.4,"Fe2(SO4)3(H2O)9":1.45,"CuSO4(H2O)5":.1,"ZnSO4(H2O)7":.04,H3BO3:.1,"(NH4)2MoO4":.04,"MnSO4(H2O)5":.73,C10H14N2Na2O8:2.5},tankVolume:100,volume:500,note:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Удо Ермолаева. МИКРО (gh < 7)",reagents:{K2SO4:7.45,"MgSO4(H2O)7":16.4,"Fe2(SO4)3(H2O)9":1.45,"CuSO4(H2O)5":.1,"ZnSO4(H2O)7":.04,H3BO3:.1,"(NH4)2MoO4":.04,"MnSO4(H2O)5":.73,C10H14N2Na2O8:1.75},tankVolume:100,volume:500,note:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Удо Ермолаева. МИКРО (Железный купорос)",reagents:{K2SO4:7.45,"MgSO4(H2O)7":16.4,"FeSO4(H2O)7":1.44,"CuSO4(H2O)5":.1,"ZnSO4(H2O)7":.04,H3BO3:.1,"(NH4)2MoO4":.04,"MnSO4(H2O)5":.73,C10H14N2Na2O8:1.75,C14H18N3O10Na2Fe:1},tankVolume:100,volume:500,note:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"}],m=n("da53"),v=n("2f62"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"d-flex mt-1",class:{"flex-column":t.$vuetify.breakpoint["xs"],"flex-row":t.$vuetify.breakpoint["smAndUp"]}},[n("v-switch",{staticClass:"mr-4",attrs:{label:"Показать соотношение","hide-details":"auto"},model:{value:t.isConcentrationPercent,callback:function(e){t.isConcentrationPercent=e},expression:"isConcentrationPercent"}}),n("v-switch",{staticClass:"mr-4",attrs:{label:"Показать N и P","hide-details":"auto"},model:{value:t.isConvertion,callback:function(e){t.isConvertion=e},expression:"isConvertion"}})],1),n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"pl-0 text-center"},[t._v(" Реагент ")]),t._l(Object.keys(t.totalIonConcentration),(function(e,s){return n("th",{key:e,staticClass:"text-center",class:{"pr-0":s===Object.keys(t.totalIonConcentration).length-1}},[t.isConvertion&&e!==t.convertIonName(e)?[t._v(" "+t._s(e)+" / ")]:t._e(),e!==t.convertIonName(e)?[t._v(" "+t._s(t.convertIonName(e))+", г/л ")]:[t._v(" "+t._s(e)+", г/л ")]],2)}))],2)]),n("tbody",[t._l(Object.keys(t.concentration),(function(e){return n("tr",{key:e},[n("td",{staticClass:"pl-0 text-center"},[t._v(" "+t._s(e)+" ")]),t._l(t.totalIonConcentration,(function(s,a,o){return n("td",{key:e+a,staticClass:"text-center",class:{"pr-0":o===Object.keys(t.concentration).length-1}},[Object.keys(t.concentration[e]).includes(a)?[t.isConvertion&&a!==t.convertIonName(a)?[t._v(" "+t._s(t.concentration[e][a].toFixed(3))+" / ")]:t._e(),a!==t.convertIonName(a)?[t._v(" "+t._s((t.convertIonRatio(a)*t.concentration[e][a]).toFixed(3))+" ")]:[t._v(" "+t._s(t.concentration[e][a].toFixed(3))+" ")],s&&t.isConcentrationPercent?[t._v(" ("+t._s((t.concentration[e][a]/s*100).toFixed(1))+"%) ")]:t._e()]:[t._v(" - ")]],2)}))],2)})),n("tr",{staticClass:"font-weight-bold"},[n("td",{staticClass:"pl-0 text-center"},[t._v(" Сумма ")]),t._l(t.totalIonConcentration,(function(e,s,a){return[s!==t.convertIonName(s)?n("td",{key:s,staticClass:"text-center",class:{"pr-0":a===Object.keys(t.totalIonConcentration).length-1}},[t.isConvertion&&s!==t.convertIonName(s)?[t._v(" "+t._s(e.toFixed(3))+" / ")]:t._e(),t._v(" "+t._s((t.convertIonRatio(s)*e).toFixed(3))+" ")],2):n("td",{key:s,staticClass:"text-center",class:{"pr-0":a===Object.keys(t.totalIonConcentration).length-1}},[t._v(" "+t._s(e.toFixed(3))+" ")])]}))],2)],2)]},proxy:!0}])})],1)},p=[],f={name:"ElementsTable",props:{totalIonConcentration:{type:Object,default:function(){}},fertilizerMass:{type:Object,default:function(){}},concentration:{type:Object,default:function(){}}},data:function(){return{isConcentrationPercent:!1,isConvertion:!1}},methods:{convertIonRatio:m["c"],convertIonName:m["b"],countPercent:m["d"]}},b=f,C=n("2877"),_=n("6544"),O=n.n(_),y=n("1f4f"),g=n("b73d"),k=Object(C["a"])(b,d,p,!1,null,"4d7df51e",null),x=k.exports;O()(k,{VSimpleTable:y["a"],VSwitch:g["a"]});var w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"d-flex mt-2 mb-2",class:{"flex-column":t.$vuetify.breakpoint["xs"],"flex-row":t.$vuetify.breakpoint["smAndUp"]}},[n("v-switch",{staticClass:"mr-4",attrs:{label:"Показать соотношение","hide-details":"auto"},model:{value:t.isConcentrationPercent,callback:function(e){t.isConcentrationPercent=e},expression:"isConcentrationPercent"}}),n("v-switch",{staticClass:"mr-4",attrs:{label:"Показать N и P","hide-details":"auto"},model:{value:t.isConvertion,callback:function(e){t.isConvertion=e},expression:"isConvertion"}})],1),n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"pl-0 text-center"},[t._v(" Реагент ")]),t._l(Object.keys(t.totalIonConcentration),(function(e,s){return n("th",{key:e,staticClass:"text-center",class:{"pr-0":s===t.totalIonConcentration.length-1}},[t.isConvertion&&e!==t.convertIonName(e)?[t._v(" "+t._s(e)+" / ")]:t._e(),e!==t.convertIonName(e)?[t._v(" "+t._s(t.convertIonName(e))+", г ")]:[t._v(" "+t._s(e)+", г ")]],2)}))],2)]),n("tbody",[t._l(t.fertilizerMass,(function(e,s){return n("tr",{key:s},[n("td",{staticClass:"pl-0 text-center"},[t._v(" "+t._s(s)+" ")]),t._l(t.totalIonConcentration,(function(a,o,i){return n("td",{key:s+o,staticClass:"text-center",class:{"pr-0":i===t.totalIonConcentration.length-1}},[Object.keys(t.countPercent(s)).includes(o)?[t.isConvertion&&o!==t.convertIonName(o)?[t._v(" "+t._s((e*t.countPercent(s)[o]).toFixed(3))+" / ")]:t._e(),o!==t.convertIonName(o)?[t._v(" "+t._s((t.convertIonRatio(o)*e*t.countPercent(s)[o]).toFixed(3))+" ")]:[t._v(" "+t._s((e*t.countPercent(s)[o]).toFixed(3))+" ")],a&&t.isConcentrationPercent?[t._v(" ("+t._s((e*t.countPercent(s)[o]/(a*t.totalFertilizerMass)*100).toFixed(1))+"%) ")]:t._e()]:[t._v(" - ")]],2)}))],2)})),n("tr",{staticClass:"font-weight-bold"},[n("td",{staticClass:"pl-0 text-center"},[t._v(" Сумма ")]),t._l(t.totalIonConcentration,(function(e,s,a){return[s!==t.convertIonName(s)?n("td",{key:s,staticClass:"text-center",class:{"pr-0":a===t.totalIonConcentration.length-1}},[t.isConvertion&&s!==t.convertIonName(s)?[t._v(" "+t._s((e*t.totalFertilizerMass).toFixed(3))+" / ")]:t._e(),t._v(" "+t._s((t.convertIonRatio(s)*e*t.totalFertilizerMass).toFixed(3))+" ")],2):n("td",{key:s,staticClass:"text-center",class:{"pr-0":a===t.totalIonConcentration.length-1}},[t._v(" "+t._s((e*t.totalFertilizerMass).toFixed(3))+" ")])]}))],2)],2)]},proxy:!0}])}),n("div",{staticClass:"subtitle-2 mt-2"},[t._v(" Соотношение элементов "),n("v-tooltip",{attrs:{bottom:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n("v-icon",t._g({},s),[t._v(" mdi-help-circle-outline ")])]}}])},[t._v(" Учитывает соотношение только между интересующими аквариумиста элементами. Такие элементы как сера, хлор, водород, кислород и т.д. в данном соотношении не участвуют. ")]),t._v(": ")],1),n("div",t._l(t.totalIonConcentration,(function(e,s){return n("span",{key:s,staticClass:"mr-2"},[t._v(" "+t._s(t.convertIonName(s))+" ("+t._s(e?(t.convertIonRatio(s)*e/t.totalUsefulConcentration).toFixed(5):"???")+" %) ")])})),0)],1)},I=[],j=(n("a9e3"),{name:"ElementsDryTable",props:{totalIonConcentration:{type:Object,default:function(){}},fertilizerMass:{type:Object,default:function(){}},totalFertilizerMass:{type:Number,default:0}},data:function(){return{isConcentrationPercent:!1,isConvertion:!1}},computed:{totalUsefulConcentration:function(){var t=this,e=0;return Object.entries(this.totalIonConcentration).forEach((function(n){var s=Object(r["a"])(n,2),a=s[0],o=s[1];e+=t.convertIonRatio(a)*o})),e}},methods:{convertIonRatio:m["c"],convertIonName:m["b"],countPercent:m["d"]}}),E=j,S=n("132d"),N=n("3a2f"),V=Object(C["a"])(E,w,I,!1,null,"5eadf262",null),R=V.exports;O()(V,{VIcon:S["a"],VSimpleTable:y["a"],VSwitch:g["a"],VTooltip:N["a"]});var F={name:"Recipe",components:{ElementsTable:x,ElementsDryTable:R},data:function(){var t=this;return{FORMULAS:u["a"],COMPOUNDS:l["a"],RECIPES:h,OPPOSITE:m["a"],reagents:[],compounds:[],recipeExampleChosen:null,volume:null,tankVolume:null,mass:{},solute:{},name:"",note:null,isShared:!1,isWater:!0,isShowConcentration:!1,rulesReagent:[function(){return t.reagents.length>0||t.compounds.length>0||"Выберите реагент"}],rulesMass:{isExist:function(){return function(t){return!!t||"Введите массу"}}},rulesVolume:{isExist:function(){return function(t){return!!t||"Введите объем удобрения"}}},rulesName:[function(t){return!!t||"Введите название"},function(){return!t.isExist||"Рецепт с таким названием уже существует"}]}},mounted:function(){var t=this.$router.currentRoute.query.share;if(!this.isCreate){var e;if(t){this.isShared=!0;var n=JSON.parse(decodeURIComponent(t)),s=Object(r["a"])(n,1);e=s[0]}else this.isCreate||(e=JSON.parse(JSON.stringify(Object(i["a"])({},this.recipes[this.recipeIndex]))));var a=[],o=[];this.formulas.forEach((function(t){e.reagents&&e.reagents.includes(t.key)&&a.push(t)})),this.compoundsList.forEach((function(t){e.compounds&&e.compounds.includes(t.key)&&o.push(t)})),delete e.reagents,delete e.compounds,Object.assign(this.$data,e),this.reagents=a,this.compounds=o,this.isWater=e.volume>0}},computed:Object(i["a"])(Object(i["a"])({},Object(v["d"])(["tanks","recipes"])),{},{isCreate:function(){return"create"===this.$route.params.id},recipeIndex:function(){return this.$route.params.id},formulas:function(){var t=[];return Object.entries(u["a"]).forEach((function(e){var n=Object(r["a"])(e,2),s=n[0],a=n[1];t.push(Object(i["a"])({key:s,text:"".concat(a.name," - ").concat(s)},a))})),t.sort((function(t,e){return t.text.localeCompare(e.text)})),t},compoundsList:function(){var t=[];return Object.entries(l["a"]).forEach((function(e){var n=Object(r["a"])(e,2),s=n[0],a=n[1];t.push(Object(i["a"])({key:s,text:a.name},a))})),t.sort((function(t,e){return t.text.localeCompare(e.name)})),t},recipesExamples:function(){var t=[];return h.forEach((function(e){t.push(e.name)})),t.sort((function(t,e){return t.localeCompare(e)})),t},isReagents:function(){return this.reagents.length>0||this.compounds.length>0},totalFertilizerMass:function(){return Object.values(this.mass).reduce((function(t,e){return t+e}))},concentration:function(){var t=this,e={};return this.isReagents&&Object.keys(this.mass).length>0&&(this.reagents.forEach((function(n){e[n.key]={};var s=n.ions;Object.entries(s).forEach((function(s){var a=Object(r["a"])(s,2),o=a[0],i=a[1];if(i.isNeeded){var c=1;t.volume?c=1/(t.volume/1e3):t.volume||(c=1/t.totalFertilizerMass),e[n.key][o]=t.mass[n.key]*t.countPercent(n.key)[o]*c}}))})),this.compounds.forEach((function(n){e[n.key]={};var s=n.ions;Object.entries(s).forEach((function(s){var a=Object(r["a"])(s,2),o=a[0],i=a[1],c=1;t.volume?c=1/(t.volume/1e3):t.volume||(c=1/t.totalFertilizerMass),e[n.key][o]=t.mass[n.key]*i*c}))}))),e},totalIonConcentration:function(){return this.countTotalIonConcentration(this.concentration)},isExist:function(){var t=this,e=this.recipes.map((function(t){return t.name})),n=e.findIndex((function(e){return e===t.name})),s=-1!==n,a=n===+this.recipeIndex;return s&&!a}}),watch:{reagents:function(){if(!this.name&&1===this.reagents.length){var t=this.reagents[0];this.name=t.key}var e={};this.reagents.forEach((function(t){var n=t.ions;e[t.key]={},Object.entries(n).forEach((function(n){var s=Object(r["a"])(n,2),a=s[0],o=s[1];o.isNeeded&&(e[t.key][a]=0)}))})),this.solute=Object(i["a"])({},e);var n=Object(i["a"])({},this.mass);this.reagents.forEach((function(t){t.key in n||(n[t.key]=0)})),this.mass=Object(i["a"])({},n),this.volume&&this.countDose()},compounds:function(){this.name||1!==this.compounds.length||(this.name=this.compounds[0].key);var t={};this.compounds.forEach((function(e){var n=e.ions;t[e.key]={},Object.keys(n).forEach((function(n){t[e.key][n]=0}))})),this.solute=Object(i["a"])({},t);var e=Object(i["a"])({},this.mass);this.compounds.forEach((function(t){t.key in e||(e[t.key]=0)})),this.mass=Object(i["a"])({},e),this.volume&&this.countDose()},recipeExampleChosen:function(){var t=this,e=this.RECIPES.find((function(e){return e.name===t.recipeExampleChosen}));if(e){var n=[];this.formulas.forEach((function(t){t.key in e.reagents&&n.push(t)}));var s=[];this.compoundsList.forEach((function(t){t.key in e.compounds&&s.push(t)})),this.reagents=n,this.compounds=s,this.name=e.name,this.note=e.note,this.volume=e.volume,this.tankVolume=e.tankVolume,Object.entries(e.reagents).forEach((function(e){var n=Object(r["a"])(e,2),s=n[0],a=n[1];t.mass[s]=a})),Object.entries(e.compounds).forEach((function(e){var n=Object(r["a"])(e,2),s=n[0],a=n[1];t.mass[s]=a})),this.isWater=e.volume>0}},tankVolume:function(){this.volume&&this.countDose()}},methods:Object(i["a"])(Object(i["a"])({},Object(v["c"])(["RECIPE_ADD","RECIPE_REMOVE","RECIPE_EDIT","SNACKBAR_SHOW"])),{},{countTotalIonConcentration:m["f"],countTotalIonDose:m["g"],countTotalDose:m["e"],isConcentration:m["h"],countPercent:m["d"],convertIonName:m["b"],convertIonRatio:m["c"],countDose:function(){var t=this;this.reagents.forEach((function(e){var n=e.ions,s={};Object.entries(n).forEach((function(n){var a=Object(r["a"])(n,2),o=a[0],i=a[1];if(i.isNeeded){var u=t.mass[e.key]/t.volume/t.tankVolume*(t.countPercent(e.key)[o]*t.convertIonRatio(o)*1e3);u=parseFloat(u.toFixed(5)),s[o]=u,c["a"].set(t.solute,e.key,s)}}))})),this.compounds.forEach((function(e){var n=e.ions,s={};Object.entries(n).forEach((function(n){var a=Object(r["a"])(n,2),o=a[0],i=a[1],u=t.mass[e.key]/t.volume/t.tankVolume*(i*t.convertIonRatio(o)*1e3);u=parseFloat(u.toFixed(5)),s[o]=u,c["a"].set(t.solute,e.key,s)}))}))},setIsWater:function(t){this.isWater=t,this.volume=null,this.tankVolume=null},showComponents:function(t){var e=[];return Object.entries(t).forEach((function(t){var n=Object(r["a"])(t,2),s=n[0],a=n[1];e.push("".concat(s,": ").concat((100*a).toFixed(2),"%"))})),e.join(" ")},inputMass:function(t,e){var n=parseFloat(t);c["a"].set(this.mass,e,+n?n:""),this.tankVolume&&+n&&this.countDose()},inputVolume:function(t){this.volume=parseFloat(t),this.tankVolume&&+this.volume&&this.countDose()},isFormula:function(t){return t in u["a"]},inputIonDose:function(t,e,n){var s=this,a={},o={};Object.keys(this.solute[e]).forEach((function(t){o[t]=s.convertIonRatio(t)})),Object.keys(this.solute[e]).forEach((function(i){var r=parseFloat(t);i!==n&&(o[n]>1?r/=o[n]:r*=o[i],s.isFormula(e)?r*=s.countPercent(e)[i]/s.countPercent(e)[n]:r*=l["a"][e].ions[i]/l["a"][e].ions[n]),a[i]=parseFloat(r)?parseFloat(r.toFixed(4)):0,c["a"].set(s.solute,e,a)}));var r=Object(i["a"])({},this.mass),u=0;u=this.solute[e][n]?this.isFormula(e)?this.solute[e][n]*this.tankVolume*this.volume/1e3/this.countPercent(e)[n]/this.convertIonRatio(n):this.solute[e][n]*this.tankVolume*this.volume/1e3/l["a"][e].ions[n]/this.convertIonRatio(n):0,r[e]=parseFloat(u.toFixed(3)),this.mass=Object(i["a"])({},r)},addRecipe:function(){this.$refs.recipeForm.validate()&&(this.RECIPE_ADD({name:this.name,note:this.note,volume:this.volume,reagents:Object(o["a"])(this.reagents.map((function(t){return t.key}))),compounds:Object(o["a"])(this.compounds.map((function(t){return t.key}))),mass:Object(i["a"])({},this.mass),concentration:Object(i["a"])({},this.concentration),tankVolume:this.tankVolume}),this.SNACKBAR_SHOW("Рецепт добавлен"),this.$router.push("/recipes"))},editRecipe:function(){this.$refs.recipeForm.validate()&&(this.RECIPE_EDIT({index:this.recipeIndex,recipe:{name:this.name,note:this.note,volume:this.volume,tankVolume:this.tankVolume,reagents:Object(o["a"])(this.reagents.map((function(t){return t.key}))),compounds:Object(o["a"])(this.compounds.map((function(t){return t.key}))),mass:Object(i["a"])({},this.mass),concentration:Object(i["a"])({},this.concentration)}}),this.SNACKBAR_SHOW("Рецепт изменен"),this.$router.push("/recipes"))},removeRecipe:function(){this.RECIPE_REMOVE(this.recipeIndex),this.SNACKBAR_SHOW("Рецепт удален"),this.$router.push("/recipes")}})},H=F,A=(n("6abf"),n("8336")),M=n("62ad"),P=n("2b5d"),$=n("a523"),D=n("ce7e"),T=n("0789"),K=n("4bd4"),B=n("67b6"),q=n("43a6"),z=n("0fd9"),W=n("b974"),L=n("8654"),U=n("a844"),G=Object(C["a"])(H,s,a,!1,null,null,null);e["default"]=G.exports;O()(G,{VBtn:A["a"],VCol:M["a"],VCombobox:P["a"],VContainer:$["a"],VDivider:D["a"],VExpandTransition:T["a"],VForm:K["a"],VIcon:S["a"],VRadio:B["a"],VRadioGroup:q["a"],VRow:z["a"],VSelect:W["a"],VTextField:L["a"],VTextarea:U["a"],VTooltip:N["a"]})},"3c2b":function(t,e,n){"use strict";e["a"]={Plantex:{ions:{Fe:.07,Mn:.02,Mg:.015,Zn:.004,Cu:.001,Mo:6e-4},name:"Plantex® C.S.M."},AgroMicsT:{ions:{Fe:.07,Mn:.033,B:.0065,Zn:.006,Cu:.0027,Mo:.002},name:"АгроМикс T"},"Fe-EDTA13":{ions:{Fe:.13},name:"ЭДТА Железо 13%"},"Fe-EDDGA6":{ions:{Fe:.06},name:"ЭДДГА Железо 6%"},"Fe-DTPA11":{ions:{Fe:.11},name:"ДТПА Железо 11%"},"Mn-EDTA13":{ions:{Mn:.13},name:"ЭДТА Марганец 13%"},"Ca-EDTA10":{ions:{Ca:.1},name:"ЭДТА Кальций 10%"},"Mg-EDTA6":{ions:{Mg:.06},name:"ЭДТА Магний 6%"},"Co-EDTA13":{ions:{Co:.13},name:"ЭДТА Кобальт 13%"},"Zn-EDTA13":{ions:{Zn:.15},name:"ЭДТА Цинк 15%"},"Cu-EDTA13":{ions:{Cu:.15},name:"ЭДТА Медь 15%"}}},"4bd4":function(t,e,n){"use strict";var s=n("5530"),a=(n("caad"),n("2532"),n("07ac"),n("4de4"),n("159b"),n("7db0"),n("58df")),o=n("7e2b"),i=n("3206");e["a"]=Object(a["a"])(o["a"],Object(i["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,n=function(t){return t.$watch("hasError",(function(n){e.$set(e.errorBag,t._uid,n)}),{immediate:!0})},s={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(function(a){a&&(e.errorBag.hasOwnProperty(t._uid)||(s.valid=n(t)))})):s.valid=n(t),s},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var n=this.watchers.find((function(t){return t._uid===e._uid}));n&&(n.valid(),n.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(s["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"6abf":function(t,e,n){"use strict";n("736d")},"736d":function(t,e,n){},"8b37":function(t,e,n){},"9d01":function(t,e,n){},a844:function(t,e,n){"use strict";var s=n("5530"),a=(n("a9e3"),n("1681"),n("8654")),o=n("58df"),i=Object(o["a"])(a["a"]);e["a"]=i.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(s["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},a["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,n=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(n,e)+"px"}},genInput:function(){var t=a["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){a["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},b73d:function(t,e,n){"use strict";var s=n("15fd"),a=n("5530"),o=(n("0481"),n("ec29"),n("9d01"),n("fe09")),i=n("c37a"),r=n("c3f0"),c=n("0789"),u=n("490a"),l=n("80d2"),h=["title"];e["a"]=o["a"].extend({name:"v-switch",directives:{Touch:r["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({},i["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){var t=this.attrs$,e=(t.title,Object(s["a"])(t,h));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(a["a"])(Object(a["a"])({},this.attrs),e)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(c["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(u["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===l["s"].left&&this.isActive||t.keyCode===l["s"].right&&!this.isActive)&&this.onChange()}}})}}]);
//# sourceMappingURL=chunk-412d8760.b5fc2f0f.js.map